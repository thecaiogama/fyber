function getOffers(){$("#contentTarget").html("<img id='loadingGif' src='https://d13yacurqjgara.cloudfront.net/users/12755/screenshots/1037374/hex-loader2.gif' />");var e="/offers/"+$("#userId").val()+"/"+$("#customParamenter").val()+"/"+$("#pageNumber").val();$.get(e,function(e){e.count>0?buildTable(e.count,e.offers):$("#contentTarget").html("<b>No data was found, try another search :(</b>")})}function buildTable(e,t){var a="<table class='table' id='offers'><thead><th colspan='4'>Total of offers found: {{amount}}</th><th class='nextPage'><a href='#' class='next'>next page</a></th></thead><thead><tr><th>Offer id</th><th>Title</th><th>Teaser</th><th>Payout</th><th>Thumb</th></tr></thead></table>",r={amount:e},o=Mustache.render(a,r);$("#contentTarget").html(o),buildData(t)}function buildData(e){var t="<tr><td>{{offer_id}}</td><td><a href='{{link}}'>{{title}}</a></td><td>{{teaser}}</td><td>{{payout}}</td><td><img src='{{thumb}}'/></td></tr>";$.each(e,function(e,a){item={offer_id:a.offer_id,title:a.title,link:a.link,teaser:a.teaser,payout:a.payout,thumb:a.thumbnail.lowres};var r=Mustache.render(t,item);$("#offers").append(r)}),$(".next").click(function(){$("#pageNumber").val("2"),$("#submit").click()})}$("#submit").click(function(){0===$("#userId").val().length||0===$("#customParamenter").val().length||0===$("#pageNumber").val().length?alert("Please, provide all the information required"):getOffers()}),$("#pageNumber").keydown(function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&e.ctrlKey===!0||67==e.keyCode&&e.ctrlKey===!0||88==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()});
